---
// å¼•å…¥å…¨å±€ CSS
import '../styles/global.css';

// ðŸ‘‡ 1. å¼•å…¥ä½ çš„ä¸ªäººæ•°æ® (è¿™æ ·åå­—å°±ä¸ç”¨å†™æ­»åœ¨å¸ƒå±€é‡Œäº†)
import { personalInfo } from '../data/profile';

interface Props {
	title: string;
}

const { title } = Astro.props;

const { pathname } = Astro.url;
const getPageClass = (path: string) => {
	if (path === "/" || path === "") return "is-home";
	if (path.includes("/blog")) return "is-blog";
	if (path.includes("/notes")) return "is-note";
	if (path.includes("/french")) return "is-french";
	if (path.includes("/research")) return "is-research";
	return "is-project";
};
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Personal Academic Portfolio" />
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
		<title>{title}</title>
        <link rel="icon" type="image/png" href="/image.png">
	</head>
	<body class={getPageClass(pathname)}>
		<nav class="max-w-6xl mx-auto px-6 py-8 flex justify-between items-center">
            <a href="/" class="font-sans font-bold tracking-tight text-lg uppercase hover:text-terracotta transition-colors">
                {personalInfo.name}
            </a>

            <!-- Hamburger button (mobile only) -->
            <button id="menu-toggle" class="md:hidden flex flex-col gap-1.5 p-1" aria-label="Toggle menu">
                <span class="block w-6 h-0.5 bg-charcoal transition-all duration-300" id="bar1"></span>
                <span class="block w-6 h-0.5 bg-charcoal transition-all duration-300" id="bar2"></span>
                <span class="block w-6 h-0.5 bg-charcoal transition-all duration-300" id="bar3"></span>
            </button>

            <!-- Desktop nav -->
            <div class="hidden md:flex gap-8 text-sm font-sans text-stone-text">
                <a href="/research" class="hover:text-charcoal transition-colors">Research</a>
                <a href="/project" class="hover:text-charcoal transition-colors">Project</a>
                <a href="/french" class="hover:text-charcoal transition-colors">French</a>
                <a href="/notes" class="hover:text-charcoal transition-colors">Notes</a>
                <a href="/blog" class="hover:text-charcoal transition-colors">Blog</a>
            </div>
        </nav>

        <!-- Mobile nav -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-6 text-sm font-sans text-stone-text">
            <div class="flex flex-col gap-4 border-t border-stone-300 pt-4">
                <a href="/research" class="hover:text-charcoal transition-colors">Research</a>
                <a href="/project" class="hover:text-charcoal transition-colors">Project</a>
                <a href="/french" class="hover:text-charcoal transition-colors">French</a>
                <a href="/notes" class="hover:text-charcoal transition-colors">Notes</a>
                <a href="/blog" class="hover:text-charcoal transition-colors">Blog</a>
            </div>
        </div>

        <script>
            const toggle = document.getElementById('menu-toggle');
            const menu = document.getElementById('mobile-menu');
            const bar1 = document.getElementById('bar1');
            const bar2 = document.getElementById('bar2');
            const bar3 = document.getElementById('bar3');

            toggle?.addEventListener('click', () => {
                const open = menu?.classList.toggle('hidden') === false;
                bar1?.classList.toggle('translate-y-[4px]', open);
                bar1?.classList.toggle('rotate-45', open);
                bar2?.classList.toggle('opacity-0', open);
                bar3?.classList.toggle('-translate-y-[4px]', open);
                bar3?.classList.toggle('-rotate-45', open);
            });
        </script>

        <slot />

        <footer class="max-w-6xl mx-auto px-6 py-12 mt-20 border-t border-stone-300 flex justify-between text-sm text-stone-text font-sans">
            <div>&copy; 2026 {personalInfo.name.toUpperCase()}.</div>
            <div class="flex gap-4">
                <a href={personalInfo.github} target="_blank" class="hover:text-charcoal">GitHub</a>
                <a href={personalInfo.linkedin} target="_blank" class="hover:text-charcoal">LinkedIn</a>
            </div>
        </footer>
	</body>
</html>