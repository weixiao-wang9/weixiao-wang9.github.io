---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// 获取所有 blog 并按日期倒序排列
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="Blog">
	<main class="max-w-6xl mx-auto px-6 py-24">
        
        <header class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-24 border-b border-stone-300 pb-12">
            <h1 class="font-serif text-6xl md:text-7xl text-charcoal tracking-tight">
                Writing
            </h1>
            <div class="flex flex-col justify-end">
                <p class="font-sans text-xl text-stone-600 leading-relaxed max-w-md">
                    Thoughts on algebraic topology, machine learning systems, and the mathematics of intelligence.
                </p>
            </div>
        </header>
		
        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
            <div class="md:col-span-9 md:col-start-4 space-y-20"> 
                {posts.length === 0 ? (
                    <p class="text-stone-500 italic text-lg border-t border-stone-300 pt-8">No posts yet. Check back soon!</p>
                ) : (
                    posts.map((post) => (
                        <a href={`/blog/${post.slug}`} class="block group">
                            <article class="border-t border-stone-300 pt-8 transition-all duration-500">
                                
                                <div class="flex items-center gap-3 mb-3">
                                    <time datetime={post.data.date.toISOString()} class="font-sans text-xs font-bold text-terracotta uppercase tracking-widest">
                                        {post.data.date.toLocaleDateString('en-us', {
                                            year: 'numeric',
                                            month: 'short',
                                            day: 'numeric',
                                        })}
                                    </time>
                                    <span class="w-8 h-[1px] bg-terracotta opacity-50"></span>
                                    <span class="font-sans text-xs font-bold text-stone-400 uppercase tracking-widest">ESSAY</span>
                                </div>

                                <h2 class="font-serif text-4xl md:text-5xl leading-[1.1] text-charcoal group-hover:text-terracotta transition-colors duration-300 mb-6">
                                    {post.data.title}
                                </h2>

                                <p class="font-sans text-lg text-stone-600 leading-relaxed max-w-2xl mb-6">
                                    {post.data.description}
                                </p>
                                
                                <div class="flex items-center gap-2 text-charcoal font-sans text-sm font-bold uppercase tracking-widest group-hover:gap-4 transition-all duration-300">
                                    <span>Read Article</span>
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-terracotta">
                                        <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </article>
                        </a>
                    ))
                )}
            </div>
		</div>
	</main>
</Layout>